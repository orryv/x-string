# Codex prompts

## fixing tests

```
Run "composer test" and you'll see some issues.

Fix these issues by fixing the code (the tests should be fine).
Never update test files themselves in the tests/docs/ folder,
these tests are auto generated by running "composer compose-docs-tests".
It is based on code snippets prefixed with <!-- test:... --> in the docs/ folder,
so in rare cases where you need to fix a test, you should fix the code snippet in the docs/ folder instead.
```

## fixing tests (heave)

```
run `compose-docs-tests` (this runs the script that generates tests from the docs), but for now look at the output of that script.

Then apply the following for the first 5 methods where 0 tests are found (or the doc file is not found) which is shown in the output of `compose-docs-tests`, so apply this for each method:

-----
The current documentation is about a method/function/class.
You'll have to take a look at the examples/tests provided in the docs, 
most often they are prepended with <!-- test:... -->.
Code blocks prepended with <!-- test:*test-name* --> are examples which are also converted to tests for PHPUnit.

When no documentation file exists yet, you'll have to create it. You can find other docs files in the docs/ folder to use as reference for the layout. You can find information about the method itself in readme-v3.md (other readme's are outdated). The info in that readme should be close to finished/without issues, but always think about if something is missing or incorrect.

If the current method must do tests which depends on other methods/classes/functionalities (ex. Newline and Regex class), you must first create them (the code and the docs/tests) before you can create the docs/tests for the current method. You should find documentation about these other methods/classes/functionalities in the main readme-v3.md file or the docs/ folder. If you can't find any documentation about them, ask me for help.

1a. Check the existing documentation and update if some mistakes are made.
1b. Think about if all exceptions are included in the "Thrown exceptions" section.
2. Think about more tests/examples (important, relevant and/or useful ones, test exceptions and edge cases too,) that could be added to the docs. And add them. Some tests may be about (not limited to):
  - using different modes (fromMode(): Byte, Multibyte, Grapheme) (min 1 test per mode if relevant)
  - edge cases (min 1 test if relevant)
  - exceptions (min 1 test per exception)
  - immutability (original remains unchanged) or mutability (original is changed) (min 1 test)
  - empty strings (min 1 test)
  - malformed input (min 1 test if relevant)
  - invalid arguments (throws InvalidArgumentException) (min 1 test)
  - typical use cases (min 2 test)
  - untypical use cases (min 1 test if relevant)

The rules for test examples code blocks are (look at other completed docs for examples like: replace.md, pluck.pd, shuffle.md):
  - An example that must be converted to a test must be prepended with <!-- test:... -->. (with an empty line between header and the <!-- test:... -->)
  - The example must be a valid PHP code block (```php ... ```)
  - Include assertions to be used in the test. Use `#Test: ...` for assertions, e.g. `#Test: self::assertSame(4, $result);` or for exceptions `#Test: $this->expectException(SomeException::class);`. Assertions must be on one line (noy multi-line) per assertion.

3. Make sure the code examples are correct.
4. give the result back to me in a .md file that I can download.

Current file:
*The test file goes here*
---

When done run "composer test" and you'll see some issues.

Fix these issues by fixing the code (the tests should be fine).
Never update test files themselves in the tests/docs/ folder,
these tests are auto generated by running "composer compose-docs-tests".
It is based on code snippets prefixed with <!-- test:... --> in the docs/ folder,
so in rare cases where you need to fix a test, you should fix the code snippet in the docs/ folder instead.
```


# ChatGPT prompts

## Add tests to doc

```
I'll provide the current documentation about a method/function/class.
You'll have to take a look at the examples/tests provided in the docs, 
most often they are prepended with <!-- test:... -->.
Code blocks prepended with <!-- test:*test-name* --> are examples which are also converted to tests for PHPUnit.

1a. Check the existing documentation and update if some mistakes are made.
1b. Think about if all exceptions are included in the "Thrown exceptions" section.
2. Think about more tests/examples (important, relevant and/or useful ones, test exceptions and edge cases too,) that could be added to the docs. And add them. Some tests may be about (not limited to):
  - edge cases
  - exceptions
  - immutability (original remains unchanged) or mutability (original is changed)
  - nested paths
  - wildcard paths
  - recursive operations
  - empty arrays
  - single-element arrays
  - non-array values at the path (throws NotAnArrayException)
  - malformed path selectors (throws InvalidPathException)
  - invalid arguments (throws InvalidArgumentException)
  - typical use cases
  - untypical use cases
  - array in path (should throw InvalidPathException)

The rules for test examples code blocks are:
  - An example that must be converted to a test must be prepended with <!-- test:... -->. (with an empty line between header and the <!-- test:... -->)
  - The example must be a valid PHP code block (```php ... ```)
  - Include assertions to be used in the test. Use `#Test: ...` for assertions, e.g. `#Test: self::assertSame(4, $result);` or for exceptions `#Test: $this->expectException(SomeException::class);`. Assertions must be on one line (noy multi-line) per assertion.

3. Make sure the code examples are correct.
4. give the result back to me in a .md file that I can download.

Current file:
```


# TMP


```
Move (and update all references in code and docs):
- `src/XArray/ArrayLinter` -> `src/XArray/Linter/LinterExecutor` (Orryv\XArray\Linter\LinterExecutor)
- `src/XArray/ArrayLinterResult` -> `src/XArray/Linter/LinterExecutorResult` (Orryv\XArray\Linter\LinterExecutorResult)
- `src/XArray/Expected` -> `src/XArray/Linter` (Orryv\XArray\Linter)
- All other files in src/XArray/ starting with `Expected` -> `src/XArray/Linter/...` but change Expected to LinterExpectation (e.g. `src/XArray/ExpectedBuilder` -> `src/XArray/Linter/LinterExpectationBuilder` (Orryv\XArray\Linter\LinterExpectationBuilder))

So the only file left in src/XArray is Linter.php (Orryv\XArray\Linter)
```